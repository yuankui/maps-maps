(this.webpackJsonpmaps=this.webpackJsonpmaps||[]).push([[0],{155:function(e,t){},311:function(e,t,n){},312:function(e,t,n){},423:function(e,t){},427:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(57),s=n.n(a),i=(n(311),n(16)),l=(n(312),n(3)),o=n(25),j=n(296),u=n(297),b=n(23);var x=function(e){var t=e.layers,n=e.onToggle;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:"text-2xl mb-4",children:"\u56fe\u5c42\u7ba1\u7406"}),t.map((function(e){return Object(b.jsxs)("div",{className:"mb-2 flex flex-row items-center py-1 px-2 border-1 rounded justify-between",children:[Object(b.jsxs)("div",{className:"flex flex-row items-center",children:[Object(b.jsx)("div",{className:"inline-flex w-3 h-3 rounded-full mx-1",style:{backgroundColor:e.color}}),Object(b.jsx)("div",{className:"p-1 pr-2",style:{opacity:e.visible?1:.2},children:e.name})]}),Object(b.jsx)("div",{className:"flex flex-row items-center justify-center",children:Object(b.jsx)("button",{href:"",onClick:function(t){t.preventDefault(),n(e.name)},className:"flex flex-row items-center",children:e.visible?Object(b.jsx)(j.a,{}):Object(b.jsx)(u.a,{})})})]},e.name)}))]})},f=n(292),d=n(113),m=n(447),h=n(444),p=n(446),O=n(285);var g=function(e){var t=e.value,n=e.onChange;return Object(b.jsx)(O.a,{className:"m-2",color:t,onChange:function(e){n(e.hex)}})},v=n(12),y=n.n(v),C=n(28);var N=function(e){e.value;var t=e.onChange;return Object(b.jsx)(p.a,{placeholder:"geojson\u6587\u4ef6",accept:".geojson,.json",className:"m-2",type:"file",onChange:function(){var e=Object(C.a)(y.a.mark((function e(n){var r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.target.files[0].text();case 2:r=e.sent,e.prev=3,c=JSON.parse(r),t(c),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),f.b.error("\u8bf7\u9009\u62e9geojson\u6587\u4ef6"),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()})};var w=function(e){var t=e.onAddLayer,n=Object(r.useState)(!1),c=Object(i.a)(n,2),a=c[0],s=c[1],l=Object(r.useCallback)((function(){s(!1)}),[]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{onClick:function(e){s(!0)},children:"\u65b0\u589e\u56fe\u5c42"}),Object(b.jsxs)(m.a,{visible:a,onCancel:l,footer:null,children:[Object(b.jsx)("h1",{className:"m-2 text-2xl",children:"\u65b0\u589e\u56fe\u5c42"}),Object(b.jsxs)(h.a,{onFinish:function(e){try{t(e),l()}catch(n){f.b.error(n.message)}},children:[Object(b.jsx)(h.a.Item,{name:"name",rules:[{required:!0}],children:Object(b.jsx)(p.a,{className:"m-2",placeholder:"LayerName"})}),Object(b.jsx)(h.a.Item,{name:"points",rules:[{required:!0}],children:Object(b.jsx)(N,{})}),Object(b.jsx)(h.a.Item,{name:"color",rules:[{required:!0}],children:Object(b.jsx)(g,{})}),Object(b.jsx)(h.a.Item,{children:Object(b.jsxs)("div",{className:"flex flex-row justify-end gap-2",children:[Object(b.jsx)(d.a,{onClick:l,children:"Cancel"}),Object(b.jsx)(d.a,{type:"primary",htmlType:"submit",children:"Submit"})]})})]})]})]})};var k=function(e){var t=e.layers,n=e.onLayersChange;return Object(b.jsxs)("div",{className:"absolute left-2 top-2 bg-white p-5 rounded w-56",children:[Object(b.jsx)(x,{layers:t,onToggle:function(e){var r=t.map((function(t){return t.name!==e?t:Object(l.a)(Object(l.a)({},t),{},{visible:!t.visible})}));return n(r)}}),Object(b.jsx)(w,{onAddLayer:function(e){var r=e.name,c=e.points;!function(e){if(t.filter((function(t){return t.name===e.name})).length>0)throw new Error("\u540d\u79f0\u91cd\u590d");n([].concat(Object(o.a)(t),[e]))}({name:r,color:e.color,points:c,visible:!0})}})]})},T=n(441),I=n(442),S=n(450),A=n(203);function F(e){if(!e)return[255,255,255,0];if(Array.isArray(e))return e.slice(0,4);var t=Object(S.a)(e);return[t.r,t.g,t.b,255]}var L=function(e){var t=e.geoJsons.map((function(e){return new T.a({id:"geojson-layer:"+e.name,data:e.points,pickable:!0,stroked:!1,filled:!0,extruded:!0,pointType:"circle+text",getFillColor:F(e.color),getPointRadius:5,pointRadiusUnits:"pixels",getTextAnchor:"start",getTextPixelOffset:[6,0],textCharacterSet:"auto",getText:function(e){return e.properties.name},getTextColor:F(e.color),getTextSize:12})})),n=c.a.useState({longitude:114.02589,latitude:22.540777,zoom:11}),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(b.jsx)(I.a,Object(l.a)(Object(l.a)({initialViewState:a},a),{},{onViewportChange:s,controller:!0,layers:t,children:Object(b.jsxs)(A.c,{mapStyle:"mapbox://styles/yuankui/ckumcg5loegxe17pr0kay2zkd",mapboxApiAccessToken:"pk.eyJ1IjoieXVhbmt1aSIsImEiOiJja3VtNGhranUwNzg3MzBsaWx2dnFod2ZjIn0.gCAWnEO9GQ2reK72LZXUQA",children:[Object(b.jsx)(A.a,{style:{right:10,top:10,zIndex:10}}),Object(b.jsx)(A.b,{style:{right:10,top:50}})]})}))};var J=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useMemo)((function(){return n.filter((function(e){return!!e.visible}))}),[n]);return Object(b.jsx)("div",{className:"App p-10 flex items-center flex-col h-screen",children:Object(b.jsxs)("div",{className:"w-3/4 h-full flex flex-col",children:[Object(b.jsx)("h1",{className:"font-bold font-5xl",children:"Map Demo"}),Object(b.jsxs)("div",{className:"relative flex flex-col items-stretch flex-1",children:[Object(b.jsx)(L,{geoJsons:a}),Object(b.jsx)(k,{layers:n,onLayersChange:c})]})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,451)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};n(426);s.a.render(Object(b.jsx)(J,{}),document.getElementById("root")),z()}},[[427,1,2]]]);
//# sourceMappingURL=main.8853be6f.chunk.js.map